<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Elon Musk — Bitcoin balance over a trillion years</title>
  <style>
    :root{--bg:#040214;--neon:#00ffd5;--accent:#ff4d6d}
    body{margin:0;background:linear-gradient(180deg,#03010a 0%,#07102a 100%);font-family:Inter,system-ui,Segoe UI,Roboto,Arial;color:#e6f6ff;padding:28px}
    .card{background:rgba(255,255,255,0.03);border:1px solid rgba(255,255,255,0.04);padding:16px;border-radius:12px;box-shadow:0 10px 40px rgba(0,0,0,0.6)}
    header{display:flex;align-items:center;gap:16px}
    h1{margin:0;font-size:20px;color:var(--neon);font-family:Orbitron,Roboto,monospace}
    .sub{color:#9fb8ff;font-size:13px}
    .controls{display:flex;gap:12px;flex-wrap:wrap;margin-top:12px}
    label{font-size:13px;color:#cfeaff}
    input[type=number],input[type=range]{padding:6px;border-radius:8px;border:none;background:#06102a;color:#eaffff}
    button{background:linear-gradient(90deg,var(--neon),#6b5cff);border:none;color:#02121a;padding:8px 12px;border-radius:8px;cursor:pointer;font-weight:700}
    #chartWrap{height:420px;margin-top:16px}
    table{width:100%;border-collapse:collapse;margin-top:12px;font-size:13px}
    th,td{padding:8px;text-align:left;border-bottom:1px dashed rgba(255,255,255,0.03)}
    footer{color:#9fb8ff;font-size:13px;margin-top:12px}
    @media(max-width:720px){#chartWrap{height:320px}}
  </style>
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
</head>
<body>
  <header>
    <div>
      <h1>Elon Musk — Bitcoin balance over a trillion years</h1>
      <div class="sub">Synthetic, deterministic simulation. Time span: 1,000,000,000,000 years (sampled). Not financial advice.</div>
    </div>
    <div style="margin-left:auto">
      <button id="exportBtn">Download CSV</button>
    </div>
  </header>

  <div class="card">
    <div class="controls">
      <label>BTC price (USD): <input id="btcPrice" type="number" value="30000" step="100" /></label>
      <label>DVD price (USD): <input id="dvdPrice" type="number" value="15" step="0.5" /></label>
      <label>Movie price (USD): <input id="moviePrice" type="number" value="12" step="0.5" /></label>
      <label>Samples: <input id="samples" type="number" value="200" min="10" max="2000" /></label>
      <button id="regen">Regenerate</button>
    </div>

    <div id="chartWrap"><canvas id="btcChart"></canvas></div>

    <table id="summary">
      <thead><tr><th>Person</th><th>Latest balance (BTC)</th><th>Value (USD)</th><th>DVDs</th><th>Movies</th></tr></thead>
      <tbody></tbody>
    </table>
    <footer>Years are displayed as offsets from 2025 (e.g., 0 = 2025, 1e12 = 1,000,000,000,025). This visualization samples across the trillion-year span to keep the chart responsive.</footer>
  </div>

<script>
// deterministic RNG
function mulberry32(a){return function(){var t=a+=0x6D2B79F5;t=Math.imul(t^t>>>15,t|1);t^=t+Math.imul(t^t>>>7,t|61);return ((t^t>>>14)>>>0)/4294967296}}

// generate years as scientific notation labels and numeric offsets
const START_YEAR = 2025;
const TRILLION = 1_000_000_000_000; // 1e12

function generateYears(samples){
  const arr=[];
  for(let i=0;i<samples;i++){
    // space samples logarithmically to show both near and far future
    const t = i/(samples-1); // 0..1
    // use power curve to give more detail early and still reach 1e12
    const offset = Math.floor(Math.pow(t,1.3)*TRILLION);
    arr.push(offset);
  }
  return arr;
}

function generateSeries(seed, offsets){
  const rnd = mulberry32(seed);
  let v = 0.05 + rnd()*0.3; // starting BTC
  const out = [];
  for(let i=0;i<offsets.length;i++){
    const o = offsets[i];
    // growth that mildly increases with offset, plus volatility
    const growthFactor = 1 + Math.log10(1 + o + 1) * 0.000002; // tiny
    v = Math.max(0, v * (growthFactor + (rnd()-0.5)*0.02) + (Math.sin(o*0.000000001)*rnd()*0.5));
    // occasional huge cosmic leap very rarely
    if(rnd() < 0.0005) v += rnd()*50;
    out.push(+v.toFixed(8));
  }
  return out;
}

let offsets = generateYears(200);
let series = [];
function regenerate(){
  const samples = parseInt(document.getElementById('samples').value,10) || 200;
  offsets = generateYears(samples);
  series = generateSeries(4242424242, offsets); // fixed seed for Elon Musk
}

regenerate();

// Chart
const ctx = document.getElementById('btcChart');let chart=null;
function humanYearLabel(offset){
  // show short label for small offsets, scientific for huge
  if(offset < 10000) return (START_YEAR + offset).toString();
  if(offset < 1_000_000) return (START_YEAR + offset).toString();
  // scientific notation
  return (START_YEAR + offset).toExponential(2);
}

function drawChart(){
  const labels = offsets.map(o=>humanYearLabel(o));
  const ds = [{ label: 'Elon Musk', data: series, tension:0.25, pointRadius:2, borderWidth:2, borderColor:'#00ffd5', fill:false }];
  if(chart) chart.destroy();
  chart = new Chart(ctx.getContext('2d'),{
    type:'line',data:{labels:labels,datasets:ds},options:{responsive:true,interaction:{mode:'index',intersect:false},plugins:{title:{display:true,text:'Elon Musk — BTC balance across a trillion-year span'},tooltip:{callbacks:{label:function(c){return c.dataset.label+': '+c.formattedValue+' BTC'}}}},scales:{x:{title:{display:true,text:'Year (offset / representation)'}},y:{title:{display:true,text:'Balance (BTC)'}}}}
  });
}

drawChart();

function updateSummary(){
  const btcPrice = parseFloat(document.getElementById('btcPrice').value) || 30000;
  const dvdPrice = parseFloat(document.getElementById('dvdPrice').value) || 15;
  const moviePrice = parseFloat(document.getElementById('moviePrice').value) || 12;
  const tbody = document.querySelector('#summary tbody');
  tbody.innerHTML = '';
  const latest = series[series.length-1] || 0;
  const usd = latest * btcPrice;
  const dvds = Math.floor(usd / dvdPrice);
  const movies = Math.floor(usd / moviePrice);
  const tr = document.createElement('tr');
  tr.innerHTML = `<td><strong>Elon Musk</strong></td><td>${latest.toFixed(8)}</td><td>$${usd.toLocaleString(undefined,{maximumFractionDigits:2})}</td><td>${dvds}</td><td>${movies}</td>`;
  tbody.appendChild(tr);
}

updateSummary();

// interactions
document.getElementById('regen').addEventListener('click',()=>{regenerate();drawChart();updateSummary();});
['btcPrice','dvdPrice','moviePrice','samples'].forEach(id=>document.getElementById(id).addEventListener('input',updateSummary));

// CSV export
document.getElementById('exportBtn').addEventListener('click',function(){
  let csv=['OffsetYears,LabelYear,BTC'];
  for(let i=0;i<offsets.length;i++){
    const off = offsets[i];
    const label = (off < 1000000) ? (START_YEAR + off) : (START_YEAR + off).toExponential(2);
    csv.push([off,label,series[i]].join(','));
  }
  const blob = new Blob([csv.join('')],{type:'text/csv'});
  const url = URL.createObjectURL(blob);
  const a = document.createElement('a'); a.href = url; a.download = 'elon_musk_btc_trillion_years.csv'; document.body.appendChild(a); a.click(); a.remove(); URL.revokeObjectURL(url);
});

</script>
</body>
</html>
